#N canvas 72 31 1432 895 10;
#X obj 201 542 textfile;
#X obj 201 442 inlet save;
#X obj 333 442 inlet load;
#X obj 246 604 outlet done;
#N canvas 0 22 1350 705 save_preset 0;
#X msg 100 179 add \$1;
#X msg 529 120 clear;
#X obj 100 68 t b b b;
#X msg 466 121 rewind;
#X obj 100 40 inlet;
#X obj 100 233 outlet;
#X text 151 40 bang here to save;
#X obj 206 132 f 1;
#X text 606 124 1 : clear the textfile buffer;
#X text 606 140 2 : rewind to position 0;
#X text 606 156 3 : play the whole content of array into textfile \,
and when finish \, write to the selected preset;
#X obj 221 110 r preset_selection;
#X obj 100 154 tabread preset;
#X msg 206 154 write preset\$1.txt;
#X text 13 108 count 0 to n;
#N canvas 133 704 450 300 uzi 0;
#X obj 41 151 f 0;
#X obj 72 151 + 1;
#X msg 56 127 0;
#X obj 41 3 inlet;
#X obj 41 250 outlet;
#X obj 150 247 outlet;
#X obj 41 194 t f f;
#X obj 56 34 + 1;
#X obj 41 78 until 1;
#X obj 177 6 r preset_buffer_size;
#X obj 150 223 sel 1;
#X obj 41 56 f 0;
#X obj 56 108 r preset_load;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 3 0 11 0;
#X connect 6 0 4 0;
#X connect 6 1 10 0;
#X connect 7 0 11 1;
#X connect 8 0 0 0;
#X connect 9 0 10 1;
#X connect 9 0 7 0;
#X connect 10 0 2 0;
#X connect 10 0 5 0;
#X connect 11 0 8 0;
#X connect 12 0 2 0;
#X restore 100 106 pd uzi;
#X connect 0 0 5 0;
#X connect 1 0 5 0;
#X connect 2 0 15 0;
#X connect 2 1 3 0;
#X connect 2 2 1 0;
#X connect 3 0 5 0;
#X connect 4 0 2 0;
#X connect 7 0 13 0;
#X connect 11 0 7 1;
#X connect 12 0 0 0;
#X connect 13 0 5 0;
#X connect 15 0 12 0;
#X connect 15 1 7 0;
#X restore 201 487 pd save_preset;
#N canvas 0 22 1082 695 read_preset 0;
#X msg 628 152 clear;
#X msg 565 153 rewind;
#X obj 100 40 inlet;
#X obj 100 233 outlet;
#X text 151 40 bang here to read;
#X msg 201 152 rewind;
#X obj 100 68 t b b b b b;
#X obj 277 146 f 0;
#X text 537 289 1 : clear the textfile buffer;
#X text 537 305 2 : rewind to position 0;
#X text 537 321 3 : read the selected preset text file;
#X text 537 337 4 : rewind to position 0;
#N canvas 354 205 450 300 uzi2 0;
#X obj 79 192 + 1;
#X msg 130 166 0;
#X obj 21 30 inlet;
#X obj 21 247 outlet;
#X obj 21 166 t b b;
#X obj 130 142 delay 10;
#X obj 48 192 i 0;
#X obj 21 139 until 1;
#X obj 181 215 sel 1;
#X obj 228 13 r preset_buffer_size;
#X obj 36 64 + 1;
#X obj 21 89 f 0;
#X obj 130 119 r preset_load;
#X connect 0 0 6 1;
#X connect 1 0 6 1;
#X connect 2 0 11 0;
#X connect 4 0 3 0;
#X connect 4 1 6 0;
#X connect 5 0 1 0;
#X connect 6 0 0 0;
#X connect 6 0 8 0;
#X connect 7 0 4 0;
#X connect 8 0 1 0;
#X connect 8 0 7 1;
#X connect 9 0 10 0;
#X connect 9 0 8 1;
#X connect 10 0 11 1;
#X connect 11 0 7 0;
#X connect 12 0 5 0;
#X restore 100 151 pd uzi2;
#X obj 292 125 r preset_selection;
#X msg 277 168 read preset\$1.txt;
#X text 536 354 5 : bang n times to read the n lines of text of textfile
;
#X connect 0 0 3 0;
#X connect 1 0 3 0;
#X connect 2 0 6 0;
#X connect 5 0 3 0;
#X connect 6 0 12 0;
#X connect 6 1 5 0;
#X connect 6 2 7 0;
#X connect 6 3 1 0;
#X connect 6 4 0 0;
#X connect 7 0 14 0;
#X connect 12 0 3 0;
#X connect 13 0 7 1;
#X connect 14 0 3 0;
#X restore 333 486 pd read_preset;
#X obj 756 278 f \$1;
#X obj 756 246 loadbang;
#X text 798 279 buffer size;
#X text 896 268 quantity of lines being recorded in an array and then
in the textfile. This should be the quantity of parameter that is saved.
This is the first argument of [preset] abstraction, f 54;
#X obj 754 503 i;
#X obj 756 315 s preset_buffer_size;
#X obj 754 482 *;
#X obj 754 397 inlet preset selection;
#X obj 754 557 s preset_selection;
#X text 199 387 Save pattern to text file (bang), f 13;
#X text 333 395 Load pattern from text file (bang), f 16;
#X text 335 39 Used to save and recall presets. Saving writes a;
#X obj 769 458 f \$2;
#X obj 769 431 loadbang;
#X text 835 462 Second argument sets the number of preset files. 12
would mean that there are 12 presets available. When saved \, the files
will be called "preset0.txt" to "presetn.txt";
#X text 334 605 When file loading is finished \, a bang goes through
this outlet, f 64;
#X obj 263 569 s preset_load;
#N canvas 95 22 1070 665 preset_recall_tabwrite 0;
#X obj 261 20 inlet;
#X obj 261 269 t b f;
#X obj 261 362 pack 0 0;
#X obj 261 388 unpack 0 0;
#X obj 261 411 swap;
#X text 353 355 This puts an index to each of the lines of the textfile
content \, when it is output. Then the content is written back into
the table [tabwrite]. (index is the right inlet on [tabwrite] \, so
we need to swap the index and value);
#N canvas 819 354 506 450 counter 0;
#X obj 45 31 inlet;
#X obj 91 198 + 1;
#X obj 45 199 i 0;
#X msg 60 172 0;
#X obj 45 385 outlet;
#X obj 45 226 t f f;
#X obj 60 146 delay 10;
#X obj 135 187 r preset_buffer_size;
#X obj 108 256 sel 1;
#X text 176 65 Counter from 0 to n;
#X obj 60 121 r preset_load;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 1 0;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 5 0 4 0;
#X connect 5 1 8 0;
#X connect 6 0 3 0;
#X connect 7 0 8 1;
#X connect 8 0 3 0;
#X connect 10 0 6 0;
#X restore 261 312 pd counter;
#X obj 261 435 tabwrite preset;
#X connect 0 0 1 0;
#X connect 1 0 6 0;
#X connect 1 1 2 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 4 1;
#X connect 4 0 7 0;
#X connect 4 1 7 1;
#X connect 6 0 2 0;
#X restore 201 691 pd preset_recall_tabwrite;
#N canvas 95 22 728 637 preset_recall_param 0;
#X obj 261 20 inlet;
#X obj 261 291 pack 0 0;
#N canvas 150 433 654 570 uzi_counter 0;
#X obj 41 207 f 0;
#X obj 72 207 + 1;
#X msg 56 183 0;
#X obj 41 10 inlet;
#X obj 41 306 outlet;
#X obj 41 250 t f f;
#X obj 144 46 + 1;
#X obj 41 134 until 1;
#X obj 177 6 r preset_buffer_size;
#X obj 68 159 r preset_stop;
#X obj 150 279 sel 1;
#X obj 41 43 t b b;
#X obj 41 89 f 0;
#X connect 0 0 1 0;
#X connect 0 0 5 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 3 0 11 0;
#X connect 5 0 4 0;
#X connect 5 1 10 0;
#X connect 6 0 12 1;
#X connect 7 0 0 0;
#X connect 8 0 6 0;
#X connect 8 0 10 1;
#X connect 9 0 2 0;
#X connect 10 0 2 0;
#X connect 11 0 12 0;
#X connect 11 1 2 0;
#X connect 12 0 7 0;
#X restore 261 199 pd uzi_counter;
#X obj 261 319 outlet;
#X text 317 319 This puts an index to each of the lines of the textfile
content \, when it is output.;
#X obj 261 224 t f f;
#X obj 306 252 tabread preset;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 5 0;
#X connect 5 0 1 0;
#X connect 5 1 6 0;
#X connect 6 0 1 1;
#X restore 224 638 pd preset_recall_param;
#X obj 224 661 outlet recall parameters;
#X text 379 660 index (0 to n) \, value;
#X text 905 400 Value must be between 0 and 1;
#X text 335 56 Must have first argument. It is the quantity of parameters
saved. (integer from 0 to n), f 96;
#X text 335 72 Must have second argument. It is the quantity of preset
files available. (integer from 0 to n), f 98;
#X text 334 193 Outlet 1: preset recall out. This output will spit
the indexed parameter values when a preset is loaded. List (index value
(integer 0 to n)) \, parameter value), f 161;
#X text 334 209 Outlet 2: Bang when done loading (bang), f 98;
#X text 334 225 Outlet 3: Preset selection number. (integer 0 to n)
, f 98;
#X obj 764 533 outlet preset number;
#N canvas 0 22 450 278 (subpatch) 0;
#X array preset 50 float 2;
#X coords 0 127 50 0 100 140 1 0 0;
#X restore 848 617 graph;
#X obj 47 328 tabwrite preset;
#X obj 47 301 inlet write param;
#X text 47 276 receives parameter values and index;
#X text 333 126 Inlet 2: send a bang to save the parameter values to
the selected preset. (bang), f 96;
#X text 333 142 Inlet 3: send a bang to load the selected preset. (bang)
, f 98;
#X text 333 158 Inlet 4: Preset selection slider input. (0. to 1.)
, f 98;
#X text 334 110 Inlet 1: receives parameter value and index (value
\, integer), f 61;
#X connect 0 0 23 0;
#X connect 0 1 3 0;
#X connect 0 1 22 0;
#X connect 0 1 24 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 4 0 0 0;
#X connect 5 0 0 0;
#X connect 6 0 11 0;
#X connect 7 0 6 0;
#X connect 10 0 14 0;
#X connect 10 0 33 0;
#X connect 12 0 10 0;
#X connect 13 0 12 0;
#X connect 18 0 12 1;
#X connect 19 0 18 0;
#X connect 24 0 25 0;
#X connect 36 0 35 0;
