#N canvas 52 50 1448 1020 10;
#X obj 304 186 r notesIn-\$1;
#X obj 304 841 s notesOut-\$1;
#X obj 23 9 r loaddefs-\$1;
#X msg 23 76 loaddefinitions \$1;
#X obj 181 9 r loadbang-\$1;
#X obj 181 76 print loading definiton for \$1;
#X obj 23 41 symbol;
#X obj 25 186 inlet~ inL-\$1;
#X obj 135 186 inlet~ inR-\$1;
#X obj 27 841 outlet~ outL-\$1;
#X obj 136 841 outlet~ outR-\$1;
#X obj 424 185 r auxIn-\$1;
#X obj 423 208 r expIn-\$1;
#X obj 423 233 r fsIn-\$1;
#N canvas 165 50 1663 994 tapeechoeffect 1;
#X obj 1140 287 *~ 1;
#X text 260 630 rec;
#X text 1265 383 bleed -20dB;
#X obj 368 291 *~ 3;
#X obj 203 650 delwrite~ head 466;
#X obj 284 335 vd~ head;
#X obj 367 335 vd~ head;
#X obj 285 266 *~ 47;
#X obj 203 587 *~;
#X obj 222 304 dbtorms;
#X obj 1198 544 *~;
#X obj 203 205 *~;
#N canvas 4 121 769 463 tapeloop 0;
#X obj 228 212 delwrite~ tape 22834;
#X obj 228 267 vd~ tape;
#X obj 229 240 *~ 6919.3;
#X obj 228 299 *~ 0.005;
#X text 229 92 virtual stretching tape;
#X text 294 298 erasing head \, not perfectly aligned;
#X obj 228 342 *~, f 5;
#X obj 450 127 inlet;
#X msg 450 149 \$1 50;
#X obj 450 171 line~;
#X text 475 108 tape ""simulation"" amount;
#X obj 228 380 outlet~ feedback;
#X obj 227 165 inlet~ tapeloop;
#X obj 80 111 inlet~ tapespeed;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 6 0;
#X connect 6 0 11 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 6 1;
#X connect 12 0 0 0;
#X connect 13 0 2 0;
#X restore 202 494 pd tapeloop;
#X text 297 314 head 1;
#X text 381 313 head 2;
#N canvas 787 241 1036 640 tapespeedeq 0;
#X obj 238 551 outlet;
#X obj 87 267 t f f f;
#X obj 87 292 * 21.7391;
#X obj 87 314 - 30;
#X obj 174 314 + 6.08696;
#X obj 174 292 * -3.90435;
#X obj 300 289 * -7742;
#X obj 300 311 + 20000;
#X obj 141 373 pack f f f;
#X msg 141 400 hsgain \$1 \, pk1gain \$2 \, lpfreq \$3;
#X obj 87 126 inlet speed;
#X text 596 132 base settings;
#X text 203 46 slower -> lowpass;
#X text 203 70 modelled after the first head of my re-150;
#X msg 489 160 gain 2.30705 \, lpres 0.7079 \, lpactive 1 \, hsres
1.99526 \, hsfreq 3701.87 \, hsactive 1 \, pk1res 1.49249 \, pk1freq
4472.96 \, pk1active 1 \, hpres 0.707946 \, hpactive 1 \, hpfreq 130
;
#X obj 260 202 tgl 15 0 empty empty playhead_filter 17 7 0 10 -262144
-1 -1 1 1;
#X msg 511 263 lpactive \$1 \, hsactive \$1 \, pk1active \$1 \, hp1active
\$1;
#X obj 254 134 inlet playhead_filter;
#X obj 488 123 r loaded_echo;
#X connect 1 0 2 0;
#X connect 1 1 5 0;
#X connect 1 2 6 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 8 1;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 7 0 8 2;
#X connect 8 0 9 0;
#X connect 9 0 0 0;
#X connect 10 0 1 0;
#X connect 14 0 0 0;
#X connect 15 0 16 0;
#X connect 16 0 0 0;
#X connect 17 0 15 0;
#X connect 18 0 14 0;
#X restore 396 235 pd tapespeedeq;
#N canvas 827 177 1031 797 tapespeed 0;
#X obj 230 243 t f f;
#X obj 292 260 * 3;
#X floatatom 230 305 10 0 0 0 d1 - -, f 10;
#X floatatom 320 285 5 0 0 0 d2 - -, f 5;
#X obj 230 218 * 47;
#X obj 166 86 t b f, f 24;
#X msg 166 108 1;
#X obj 166 130 -;
#X obj 166 172 + 1;
#X obj 166 151 * 2.3;
#X obj 81 307 sig~;
#X floatatom 423 305 10 0 0 0 tape_length - -, f 10;
#X obj 423 216 * 6919.3;
#X obj 166 36 inlet;
#X obj 81 352 outlet~;
#X obj 331 138 outlet;
#X floatatom 230 358 10 0 0 0 - - -, f 10;
#X floatatom 229 399 10 0 0 0 - - -, f 10;
#X obj 229 377 expr int((60000/$f1)*10)/10;
#X obj 610 672 expr 1-((($f1/47)-1)/2.3);
#X floatatom 610 691 10 0 0 0 pot_value_from_tap - -, f 10;
#X floatatom 221 60 5 0 0 0 - - -, f 5;
#X floatatom 610 546 10 0 0 0 bpm_from_tap - -, f 10;
#X floatatom 610 656 10 0 0 0 ms_again - -, f 10;
#X obj 686 586 +;
#X obj 230 333 * 8;
#X obj 610 615 expr int((60000/$f1)*10)/10;
#X obj 610 637 / 8;
#X obj 229 418 s bpm;
#X obj 640 521 clip 48.5 159.5;
#X obj 649 446 r master-bpm;
#X obj 81 329 lop~ 1;
#X connect 0 0 2 0;
#X connect 0 1 1 0;
#X connect 1 0 3 0;
#X connect 2 0 25 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 5 1 7 1;
#X connect 5 1 15 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 8 0 4 0;
#X connect 8 0 10 0;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 10 0 31 0;
#X connect 12 0 11 0;
#X connect 13 0 5 0;
#X connect 13 0 21 0;
#X connect 16 0 18 0;
#X connect 17 0 28 0;
#X connect 17 0 24 1;
#X connect 18 0 17 0;
#X connect 19 0 20 0;
#X connect 22 0 24 1;
#X connect 22 0 26 0;
#X connect 23 0 19 0;
#X connect 24 0 29 0;
#X connect 25 0 16 0;
#X connect 26 0 27 0;
#X connect 27 0 23 0;
#X connect 29 0 22 0;
#X connect 30 0 22 0;
#X connect 31 0 14 0;
#X restore 203 130 pd tapespeed;
#X obj 1199 666 *~ 1;
#X obj 1368 696 *~ 1;
#X obj 837 184 s inputbleed;
#X obj 837 154 == 0;
#X obj 1230 239 *~;
#X obj 1140 239 *~;
#X obj 1140 258 bistable inL;
#X obj 222 324 gain;
#X obj 1159 220 gain 2;
#X obj 1249 220 gain 2;
#X obj 1216 525 gain;
#X obj 203 617 tanh~;
#X obj 342 456 eq7.mmb~;
#X obj 837 131 > 0.5;
#X obj 1258 726 outlet~ L;
#X obj 1420 733 outlet~ R;
#N canvas 358 168 1258 824 wow-flutter-etc~ 0;
#X obj 116 228 noise~;
#X obj 82 507 sig~ 1;
#X obj 209 577 +~;
#X obj 165 511 *~;
#X obj 439 369 pow 2;
#X obj 210 510 *~;
#X obj 270 510 *~;
#X obj 489 369 pow 2;
#X obj 539 369 pow 2;
#X obj 116 385 lop~ 0.1;
#X obj 116 407 lop~ 0.1;
#X obj 307 355 bp~ 50 0.707;
#X obj 440 345 * 1.5;
#X obj 490 345 * 0.3;
#X obj 540 345 * 0.3;
#X text 432 96 wow \, flutter \, noise;
#X obj 440 134 inlet;
#X obj 490 134 inlet;
#X obj 540 134 inlet;
#X obj 210 639 outlet~;
#X obj 208 355 bp~ 50 0.707;
#X obj 210 610 *~ 1;
#X connect 0 0 9 0;
#X connect 0 0 11 0;
#X connect 0 0 20 0;
#X connect 1 0 2 0;
#X connect 2 0 21 0;
#X connect 3 0 2 1;
#X connect 4 0 3 1;
#X connect 5 0 2 1;
#X connect 6 0 2 1;
#X connect 7 0 5 1;
#X connect 8 0 6 1;
#X connect 9 0 10 0;
#X connect 10 0 3 0;
#X connect 11 0 6 0;
#X connect 12 0 4 0;
#X connect 13 0 7 0;
#X connect 14 0 8 0;
#X connect 16 0 12 0;
#X connect 17 0 13 0;
#X connect 18 0 14 0;
#X connect 20 0 5 0;
#X connect 21 0 19 0;
#X restore 568 161 pd wow-flutter-etc~;
#X obj 1264 425 *~ 0.01;
#X obj 222 260 * 30;
#X obj 222 282 + 70;
#X obj 417 429 r loadbang-\$1;
#X obj 29 7 receive mode-\$1;
#X obj 158 1 receive repeatrate-\$1;
#X obj 299 21 receive intensity-\$1;
#X obj 459 -2 receive echovol-\$1;
#X obj 570 30 receive wow-\$1;
#X obj 646 -3 receive flutter-\$1;
#X obj 691 65 receive dirt-\$1;
#X obj 794 10 receive inputbleed-\$1;
#X obj 973 8 receive tapeloopamount-\$1;
#X obj 973 98 receive playhead_filter-\$1;
#X obj 1187 -26 receive gaininL-\$1;
#X obj 1231 57 receive gaininR-\$1;
#X obj 1115 171 inlet~;
#X obj 1220 174 inlet~;
#X obj 575 588 s loaded_echo;
#X obj 591 538 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 84 733 5 0 0 0 - - -, f 5;
#X obj 84 752 sel 0 1 2 3 4 5;
#X text 248 708 modes \; 1 - h1 \; 2 - h2 \; 3 - h1 + h2 \; 4 - h1
+ fb \; 5 - h2 + fb \; 6 - h1 + h2 + fb;
#X msg 165 809 0 0 0;
#X obj 84 861 unpack f f f;
#X obj 84 907 s h1;
#X obj 124 906 s h2;
#X obj 165 905 s fb;
#X msg 84 771 0 -1 -1;
#X msg 94 790 -1 0 -1;
#X msg 104 809 0 0 -1;
#X msg 145 771 0 -1 0;
#X msg 155 790 -1 0 0;
#X floatatom 1465 155 5 0 0 0 - - -, f 5;
#X obj 1465 174 sel 0 1 2 3 4 5;
#X text 1468 353 in 1+2 to echo and to LR;
#X text 1609 327 in 1 to echo to L + bypass R;
#X text 1464 539 in 1 to echo to L + bypass R;
#X text 1703 544 1+2 to echo to R + 1+2 to L;
#X msg 1464 231 \; inL 0 \; inR 0 \; sum -1 \; sum2 0 \; echoL 0 \;
echoR 0 \;;
#X msg 1612 209 \; inL 0 \; inR 1 \; sum 0 \; sum2 -1 \; echoL 0 \;
echoR 1 \;;
#X msg 1467 420 \; inL 1 \; inR 0 \; sum 1 \; sum2 -1 \; echoL 1 \;
echoR 0 \;;
#X msg 1698 415 \; inL 0 \; inR 0 \; sum 0 \; sum2 -1 \; echoL -1 \;
echoR 0 \;;
#X obj 1541 101 r iomodes-\$1;
#X obj 1230 258 bistable inR;
#X obj 1141 424 bistable sum;
#X obj 1161 400 bistable sum2;
#X obj 1263 401 bistable inputbleed;
#X obj 1198 604 bistable echoL;
#X obj 1332 604 bistable echoR;
#X obj 342 492 bistable fb;
#X obj 366 402 bistable h2;
#X obj 283 402 bistable h1;
#X floatatom 336 77 5 0 0 0 - - -, f 5;
#X obj 393 73 / 100;
#X obj 197 64 / 100;
#X obj 508 39 / 100;
#X obj 580 87 / 100;
#X obj 623 85 / 100;
#X obj 670 103 / 100;
#X obj 832 47 / 100;
#X obj 946 54 / 100;
#X obj 1181 60 / 100;
#X obj 1232 97 / 100;
#X connect 0 0 4 0;
#X connect 0 0 79 0;
#X connect 0 0 80 0;
#X connect 0 0 81 0;
#X connect 3 0 6 0;
#X connect 5 0 86 0;
#X connect 6 0 85 0;
#X connect 7 0 3 0;
#X connect 7 0 5 0;
#X connect 8 0 28 0;
#X connect 9 0 24 0;
#X connect 10 0 82 0;
#X connect 10 0 83 0;
#X connect 11 0 7 0;
#X connect 11 0 12 0;
#X connect 12 0 8 0;
#X connect 15 0 29 1;
#X connect 16 0 11 0;
#X connect 16 1 15 0;
#X connect 17 0 31 0;
#X connect 18 0 32 0;
#X connect 20 0 19 0;
#X connect 21 0 78 0;
#X connect 22 0 23 0;
#X connect 23 0 0 0;
#X connect 23 1 17 0;
#X connect 24 0 8 1;
#X connect 25 0 22 1;
#X connect 26 0 21 1;
#X connect 27 0 10 1;
#X connect 28 0 4 0;
#X connect 29 0 12 1;
#X connect 29 0 10 0;
#X connect 29 0 84 0;
#X connect 30 0 20 0;
#X connect 33 0 11 1;
#X connect 34 0 10 0;
#X connect 35 0 36 0;
#X connect 36 0 9 0;
#X connect 37 0 29 2;
#X connect 37 0 52 0;
#X connect 38 0 54 0;
#X connect 39 0 89 0;
#X connect 40 0 88 0;
#X connect 41 0 90 0;
#X connect 42 0 91 0;
#X connect 43 0 92 0;
#X connect 44 0 93 0;
#X connect 45 0 94 0;
#X connect 46 0 95 0;
#X connect 47 0 15 1;
#X connect 48 0 96 0;
#X connect 49 0 97 0;
#X connect 50 0 22 0;
#X connect 51 0 21 0;
#X connect 53 0 52 0;
#X connect 54 0 55 0;
#X connect 55 0 62 0;
#X connect 55 1 63 0;
#X connect 55 2 64 0;
#X connect 55 3 65 0;
#X connect 55 4 66 0;
#X connect 55 5 57 0;
#X connect 57 0 58 0;
#X connect 58 0 59 0;
#X connect 58 1 60 0;
#X connect 58 2 61 0;
#X connect 62 0 58 0;
#X connect 63 0 58 0;
#X connect 64 0 58 0;
#X connect 65 0 58 0;
#X connect 66 0 58 0;
#X connect 67 0 68 0;
#X connect 68 0 73 0;
#X connect 68 1 74 0;
#X connect 68 2 75 0;
#X connect 68 3 76 0;
#X connect 77 0 68 0;
#X connect 78 0 0 0;
#X connect 78 1 18 0;
#X connect 79 0 17 0;
#X connect 79 1 18 0;
#X connect 80 0 17 0;
#X connect 80 0 18 0;
#X connect 81 0 34 0;
#X connect 82 0 17 0;
#X connect 82 1 18 0;
#X connect 83 0 18 0;
#X connect 83 1 17 0;
#X connect 84 0 8 0;
#X connect 85 0 29 0;
#X connect 86 0 29 0;
#X connect 88 0 35 0;
#X connect 88 0 87 0;
#X connect 89 0 16 0;
#X connect 90 0 27 0;
#X connect 91 0 33 0;
#X connect 92 0 33 1;
#X connect 93 0 33 2;
#X connect 94 0 30 0;
#X connect 95 0 12 2;
#X connect 96 0 25 0;
#X connect 97 0 26 0;
#X restore 67 589 pd tapeechoeffect;
#X obj 23 110 KontrolModule \$1 F-tapeecho;
#X obj 182 35 print loaded:tapeecho into \$1, f 35;
#X connect 0 0 1 0;
#X connect 2 0 6 0;
#X connect 2 0 5 0;
#X connect 3 0 15 0;
#X connect 4 0 16 0;
#X connect 6 0 3 0;
#X connect 7 0 14 0;
#X connect 8 0 14 1;
#X connect 14 0 9 0;
#X connect 14 1 10 0;
